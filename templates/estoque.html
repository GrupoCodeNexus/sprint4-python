{% extends "layout.html" %}
{% block title %}Estoque{% endblock %}

{% block content %}

<h3 class="text-xl font-semibold text-green-800 mb-2">üì¶ Itens em Estoque</h3>

{# Exibe mensagem de sucesso se presente nos par√¢metros da URL #}
{% if success_message %}
<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4">
    <strong class="font-bold">Sucesso:</strong>
    <span class="block sm:inline">{{ success_message }}</span>
</div>
{% endif %}

{# Exibe mensagem de erro se presente nos par√¢metros da URL #}
{% if error_message %}
<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4">
    <strong class="font-bold">Erro:</strong>
    <span class="block sm:inline">{{ error_message }}</span>
</div>
{% endif %}

<table class="w-full table-auto border-collapse">
  <thead>
    <tr class="bg-green-100">
      <th class="px-4 py-2 border">C√≥digo</th>
      <th class="px-4 py-2 border">Nome</th>
      <th class="px-4 py-2 border">Tipo</th> {# NOVA COLUNA: Tipo #}
      <th class="px-4 py-2 border">Quantidade</th>
      <th class="px-4 py-2 border">A√ß√µes</th>
    </tr>
  </thead>
  <tbody>
    {% for item in estoque %}
    <tr class="bg-white text-center">
      <td class="px-4 py-2 border">{{ item.codigo }}</td>
      <td class="px-4 py-2 border">{{ item.nome }}</td>
      <td class="px-4 py-2 border">{{ item.tipo if item.tipo else 'N/A' }}</td> {# Exibe o tipo #}
      <td class="px-4 py-2 border">{{ item.quantidade }}</td>
      <td class="px-4 py-2 border">
        {# Bot√£o de a√ß√£o (opcional) - voc√™ pode incluir op√ß√µes como editar ou excluir #}
        <form action="/remover_item" method="post" onsubmit="return confirm('Tem certeza que deseja remover este item?');">
          <input type="hidden" name="codigo" value="{{ item.codigo }}">
          <button type="submit" class="text-red-600 rounded-lg bg-red-100 px-2 py-1 transition duration-300 hover:bg-red-300 hover:text-red-800 font-semibold">Remover</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h3 class="text-xl font-semibold mt-8 mb-4 text-green-800 flex items-center gap-2">‚ûï Adicionar Novo Item ao Estoque</h3>

<form action="/adicionar_estoque" method="post" class="mb-8 p-4 border border-green-200 rounded-lg bg-green-50">
  <div class="mb-4">
    <label for="codigo" class="block text-gray-700 text-sm font-bold mb-2">C√≥digo (√önico):</label>
    <input type="text" id="codigo" name="codigo"
           class="w-full p-3 border-2 border-green-400 rounded-lg focus:outline-none"
           placeholder="Ex: MED005, ATB001..." required />
  </div>
  <div class="mb-4">
    <label for="nome" class="block text-gray-700 text-sm font-bold mb-2">Nome do Item:</label>
    <input type="text" id="nome" name="nome"
           class="w-full p-3 border-2 border-green-400 rounded-lg focus:outline-none"
           placeholder="Ex: Ibuprofeno, Luvas Est√©reis..." required />
  </div>
  <div class="mb-4">
    <label for="tipo" class="block text-gray-700 text-sm font-bold mb-2">Tipo (Gota, MG, ML, Unidade, Inje√ß√£o, etc.):</label>
    <input type="text" id="tipo" name="tipo"
           class="w-full p-3 border-2 border-green-400 rounded-lg focus:outline-none"
           placeholder="Ex: Gota, MG, ML, Unidade..." required />
  </div>
  <div class="mb-4">
    <label for="quantidade" class="block text-gray-700 text-sm font-bold mb-2">Quantidade Inicial:</label>
    <input type="number" id="quantidade" name="quantidade" value="1" min="0"
           class="w-full p-3 border-2 border-green-400 rounded-lg focus:outline-none" required />
  </div>
  <button type="submit"
          class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded shadow w-full">
    Adicionar Novo Item ao Estoque
  </button>
</form>

{% endblock %}
