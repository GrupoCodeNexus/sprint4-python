{% extends "layout.html" %}
{% block title %}Estoque{% endblock %}

{% block content %}

<h3 class="text-xl font-semibold text-green-800 mb-2">ðŸ“¦ Itens em Estoque</h3>

{% if success_message %}
<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4">
    <strong class="font-bold">Sucesso:</strong>
    <span class="block sm:inline">{{ success_message }}</span>
</div>
{% endif %}

{% if error_message %}
<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4">
    <strong class="font-bold">Erro:</strong>
    <span class="block sm:inline">{{ error_message }}</span>
</div>
{% endif %}

<table class="w-full table-auto border-collapse">
  <thead>
    <tr class="bg-green-100">
      <th class="px-4 py-2 border">CÃ³digo</th>
      <th class="px-4 py-2 border">Nome</th>
      <th class="px-4 py-2 border">Tipo</th>
      <th class="px-4 py-2 border">Quantidade</th>
      <th class="px-4 py-2 border">AÃ§Ãµes</th>
    </tr>
  </thead>
  <tbody>
    {% for item in estoque %}
    <tr class="bg-white text-center">
      <form action="/editar_item" method="post" class="flex flex-col md:flex-row">
        <td class="px-4 py-2 border">
          <input type="text" name="codigo" value="{{ item.codigo }}" readonly class="w-full text-center bg-gray-100 border-none">
        </td>
        <td class="px-4 py-2 border">
          <input type="text" name="nome" value="{{ item.nome }}" class="w-full border border-gray-300 rounded px-2 py-1">
        </td>
        <td class="px-4 py-2 border">
          <input type="text" name="tipo" value="{{ item.tipo }}" class="w-full border border-gray-300 rounded px-2 py-1">
        </td>
        <td class="px-4 py-2 border">
          <input type="number" name="quantidade" value="{{ item.quantidade }}" class="w-full border border-gray-300 rounded px-2 py-1">
        </td>
        <td class="px-4 py-2 border flex flex-col md:flex-row gap-2 justify-center items-center">
          <button type="submit" class="bg-yellow-400 text-white font-semibold px-4 py-1 rounded hover:bg-yellow-500 transition">Editar</button>
      </form>
          <form action="/remover_item" method="post" onsubmit="return confirm('Tem certeza que deseja remover este item?');">
            <input type="hidden" name="codigo" value="{{ item.codigo }}">
            <button type="submit" class="bg-red-500 text-white font-semibold px-4 py-1 rounded hover:bg-red-600 transition">Remover</button>
          </form>
        </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h3 class="text-xl font-semibold mt-8 mb-4 text-green-800 flex items-center gap-2">âž• Adicionar Novo Item ao Estoque</h3>

<form action="/adicionar_estoque" method="post" class="mb-8 p-4 border border-green-200 rounded-lg bg-green-50">
  <div class="mb-4">
    <label for="codigo" class="block text-gray-700 text-sm font-bold mb-2">CÃ³digo (Ãšnico):</label>
    <input type="text" id="codigo" name="codigo"
           class="w-full p-3 border-2 border-green-400 rounded-lg focus:outline-none"
           placeholder="Ex: MED005, ATB001..." required />
  </div>
  <div class="mb-4">
    <label for="nome" class="block text-gray-700 text-sm font-bold mb-2">Nome do Item:</label>
    <input type="text" id="nome" name="nome"
           class="w-full p-3 border-2 border-green-400 rounded-lg focus:outline-none"
           placeholder="Ex: Ibuprofeno, Luvas EstÃ©reis..." required />
  </div>
  <div class="mb-4">
    <label for="tipo" class="block text-gray-700 text-sm font-bold mb-2">Tipo:</label>
    <input type="text" id="tipo" name="tipo"
           class="w-full p-3 border-2 border-green-400 rounded-lg focus:outline-none"
           placeholder="Ex: Gota, MG, ML, Unidade..." required />
  </div>
  <div class="mb-4">
    <label for="quantidade" class="block text-gray-700 text-sm font-bold mb-2">Quantidade Inicial:</label>
    <input type="number" id="quantidade" name="quantidade" value="1" min="0"
           class="w-full p-3 border-2 border-green-400 rounded-lg focus:outline-none" required />
  </div>
  <button type="submit"
          class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded shadow w-full">
    Adicionar Novo Item ao Estoque
  </button>
</form>

{% endblock %}
